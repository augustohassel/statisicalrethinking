geom_density(mapping = aes(gamma_not_africa)) +
geom_density(mapping = aes(gamma_africa))
ggplot() +
geom_density(mapping = aes(gamma_not_africa)) +
geom_density(mapping = aes(gamma_africa), inherit.aes = T)
ggplot() +
geom_density(mapping = aes(gamma_not_africa)) +
geom_density(mapping = aes(gamma_africa), inherit.aes = F)
ggplot() +
geom_density(mapping = aes(gamma_not_africa)) +
geom_density(mapping = aes(gamma_africa)) +
labs(title="Gamma density for africa and not africa")
ggplot() +
geom_density(mapping = aes(gamma_not_africa), col="red") +
geom_density(mapping = aes(gamma_africa)) +
labs(title="Gamma density for africa and not africa")
ggplot() +
geom_density(mapping = aes(gamma_not_africa)) +
geom_density(mapping = aes(gamma_africa), col="blue") +
labs(title="Gamma density for africa and not africa")
ggplot() +
geom_density(mapping = aes(gamma_not_africa)) +
geom_density(mapping = aes(gamma_africa), col="blue") +
labs(title="Gamma density for not africa and africa")
# de cuanto es la probabilidad de que la pendiente de africa sea menor que la pendiente del resto del mundo?
diff <- gamma_africa - gamma_not_africa
sum(diff < 0) / length(diff)
(sum(diff < 0) / length(diff) )
(sum(diff < 0) / length(diff))
library(tidyverse)
library(lubridate)
year()
year(today())
as_date(year(today()))
as.date(year(today()))
floor_date(today(), unit = "year")
# Interactions --------------------------------------------------------------------------------
source(file = "scripts/basePackages.R")
# 7.1 Building an interaction ####
data("rugged")
d <- rugged
d$log_gdp <- log(d$rgdppc_2000)
dd <- d[complete.cases(d$rgdppc_2000), ]
# 7.1.2 Adding a linear interaction doesnt work ####
m7.5 <- rethinking::map(
alist(
log_gdp ~ dnorm(mu, sigma),
mu <- a + gamma*rugged + bA*cont_africa,
gamma <- bR + bAR*cont_africa,
a ~ dnorm(8, 10),
bA ~ dnorm(0, 1),
bR ~ dnorm(0, 1),
bAR ~ dnorm(0, 1),
sigma ~ dunif(0, 10)
),
data = dd
)
range(dd$rugged)
m7.5
range(dd$rugged)
range(dd$rugged)[[1]]
data.frame(
rugged=range(dd$rugged)[[1]],
cont_africa=0:1)
# 7.2.2 Africa depends upon ruggedness ####
mu_rugged_min <- link(m7.5,
data = data.frame(
rugged=range(dd$rugged)[[1]],
cont_africa=0:1))
mu_rugged_min
mu_rugged_min_mean <- mu_rugged_min %>% as.tibble() %>% map(mean) %>% bind_rows() %>% t() %>% as.tibble() %>% rename(log_gdp=V1)
mu_rugged_min_mean
mu_rugged_min_pi <- mu_rugged_min %>% as.tibble() %>% map(PI) %>% bind_rows() %>% t() %>% as.tibble() %>% rename(Lower=V1, Upper=V2)
mu_rugged_min_ribbon <- bind_cols(mu_rugged_min_mean, mu_rugged_min_pi)
mu_rugged_min_ribbon$cont_africa <- 0:1
mu_rugged_min_ribbon
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
colour = factor(cont_africa),
label = country_ggrepel)) +
guides(colour = guide_legend(title = "Africa")) +
geom_point() +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "rugged",
y = "log gdp", subtitle = "All")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
guides(colour = guide_legend(title = "Africa")) +
geom_point() +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "rugged",
y = "log gdp", subtitle = "All")
dd <- dd %>%
mutate(
country_ggrepel=case_when(
country=='Argentina' ~ 'Argentina',
country=='Germany' ~ 'Germany',
TRUE ~ ''
)
)
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
guides(colour = guide_legend(title = "Africa")) +
geom_point() +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "rugged",
y = "log gdp", subtitle = "All")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
guides(colour = guide_legend(title = "Africa")) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "rugged",
y = "log gdp", subtitle = "All")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "rugged",
y = "log gdp", subtitle = "All")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "rugged",
y = "log gdp", subtitle = "All")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Africa",
y = "log gdp", subtitle = "All")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp", subtitle = "All")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(
data = filter(dd,
rugged > median(rugged),
size = 4,
color = "red")
) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(
data = filter(dd,
rugged > median(rugged),
color = "red")
) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(
data = filter(dd,
rugged > median(rugged),
color = "red")
) +
# geom_point(position = "jitter") +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_point(
data = filter(dd,
rugged > median(rugged),
color = "red")
) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
geom_point(
data = filter(dd,
rugged > median(rugged),
color = "red")
) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
geom_point(
data = filter(dd,
rugged > median(rugged))
) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
geom_point(
data = filter(dd, rugged > median(rugged)), color="red"
) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
geom_point(
data = filter(dd, rugged > median(rugged)), color="red", position = "jitter"
) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(position = "jitter") +
geom_text_repel(size = 2) +
geom_point(
data = filter(dd, rugged > median(rugged)), color="red", position = "jitter"
) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point() +
geom_text_repel(size = 2) +
geom_point(data = filter(dd, rugged > median(rugged)), color="red") +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point() +
geom_text_repel(size = 2) +
geom_point(data = filter(dd, rugged > median(rugged)), color="red") +
geom_jitter()+
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point() +
geom_text_repel(size = 2) +
geom_point(data = filter(dd, rugged > median(rugged)), color="red") +
geom_jitter(inherit.aes = T)+
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point() +
geom_text_repel(size = 2) +
geom_point(data = filter(dd, rugged > median(rugged)), color="red") +
geom_jitter(inherit.aes = F)+
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point() +
geom_text_repel(size = 2) +
geom_point(data = filter(dd, rugged > median(rugged)), color="red") +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_text_repel(size = 2) +
geom_jitter(color = "red")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_text_repel(size = 2) +
geom_jitter(color = case_when(rugged > median(rugged) ~ "red", TRUE ~ "blue"))
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_text_repel(size = 2) +
geom_jitter(aes(colour=median(rugged)>1))
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_text_repel(size = 2) +
geom_jitter(aes(colour=median(rugged)>rugged))
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_text_repel(size = 2) +
geom_jitter(aes(colour=median(rugged)>rugged)) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(aes(colour=median(rugged)>rugged)) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_point(aes(colour=median(rugged)>rugged)) +
geom_jitter()+
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp")
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp") +
geom_line(data = mu_rugged_min_ribbon, aes(x = cont_africa, y = log_gdp), inherit.aes = F) +
geom_ribbon(data = mu_rugged_min_ribbon, aes(x = cont_africa, ymin = Lower, ymax = Upper), fill = "grey80", alpha=1/3, inherit.aes = F)
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
# geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_point(color=rugged)+
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp") +
geom_line(data = mu_rugged_min_ribbon, aes(x = cont_africa, y = log_gdp), inherit.aes = F) +
geom_ribbon(data = mu_rugged_min_ribbon, aes(x = cont_africa, ymin = Lower, ymax = Upper), fill = "grey80", alpha=1/3, inherit.aes = F)
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
# geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_point(aes(color=rugged))+
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp") +
geom_line(data = mu_rugged_min_ribbon, aes(x = cont_africa, y = log_gdp), inherit.aes = F) +
geom_ribbon(data = mu_rugged_min_ribbon, aes(x = cont_africa, ymin = Lower, ymax = Upper), fill = "grey80", alpha=1/3, inherit.aes = F)
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
# geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_jitter(aes(color=rugged))+
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp") +
geom_line(data = mu_rugged_min_ribbon, aes(x = cont_africa, y = log_gdp), inherit.aes = F) +
geom_ribbon(data = mu_rugged_min_ribbon, aes(x = cont_africa, ymin = Lower, ymax = Upper), fill = "grey80", alpha=1/3, inherit.aes = F)
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_jitter(aes(colour=median(rugged)>rugged)) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp") +
geom_line(data = mu_rugged_min_ribbon, aes(x = cont_africa, y = log_gdp), inherit.aes = F) +
geom_ribbon(data = mu_rugged_min_ribbon, aes(x = cont_africa, ymin = Lower, ymax = Upper), fill = "grey80", alpha=1/3, inherit.aes = F)
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_jitter(aes(colour=rugged>median(rugged))) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp") +
geom_line(data = mu_rugged_min_ribbon, aes(x = cont_africa, y = log_gdp), inherit.aes = F) +
geom_ribbon(data = mu_rugged_min_ribbon, aes(x = cont_africa, ymin = Lower, ymax = Upper), fill = "grey80", alpha=1/3, inherit.aes = F)
mu_rugged_max <- link(m7.5,
data = data.frame(
rugged=range(dd$rugged)[[2]],
cont_africa=0:1))
mu_rugged_max_mean <- mu_rugged_max %>% as.tibble() %>% map(mean) %>% bind_rows() %>% t() %>% as.tibble() %>% rename(log_gdp=V1)
mu_rugged_max_pi <- mu_rugged_max %>% as.tibble() %>% map(PI) %>% bind_rows() %>% t() %>% as.tibble() %>% rename(Lower=V1, Upper=V2)
mu_rugged_max_ribbon <- bind_cols(mu_rugged_max_mean, mu_rugged_max_pi)
mu_rugged_max_ribbon$cont_africa <- 0:1
ggplot(data = dd,
aes(x = cont_africa,
y = log_gdp,
label = country_ggrepel)) +
geom_jitter(aes(colour=rugged>median(rugged))) +
geom_text_repel(size = 2) +
theme_classic() +
labs(x = "Continent",
y = "log gdp") +
geom_line(data = mu_rugged_min_ribbon, aes(x = cont_africa, y = log_gdp), inherit.aes = F) +
geom_ribbon(data = mu_rugged_min_ribbon, aes(x = cont_africa, ymin = Lower, ymax = Upper), fill = "grey80", alpha=1/3, inherit.aes = F) +
geom_line(data = mu_rugged_max_ribbon, aes(x = cont_africa, y = log_gdp), inherit.aes = F, color="blue") +
geom_ribbon(data = mu_rugged_max_ribbon, aes(x = cont_africa, ymin = Lower, ymax = Upper), fill = "grey80", alpha=1/3, inherit.aes = F)
